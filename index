<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>PTP Shortlink</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
body{font-family:system-ui;margin:40px auto;max-width:600px;line-height:1.5}
input,textarea,button{width:100%;padding:10px;margin-top:8px;font-size:16px}
button{background:#111;color:#fff;border:none;border-radius:6px;cursor:pointer}
#out{margin-top:20px;word-break:break-all}
small{color:#666}
</style>
</head>
<body>
<h1>Protect The Pack Shortlink Generator</h1>
<p>Paste your long URL (mailto or normal). Youâ€™ll get a short one under your GitHub Pages address.</p>

<textarea id="longurl" rows="3" placeholder="mailto:john.creuzot@dallascounty.org?subject=..."></textarea>
<button id="make">Generate Shortlink</button>

<div id="out"></div>

<hr>
<small>Local only: mappings save in your browser storage. Hardcode permanent ones in the JS if you need persistence.</small>

<script>
const base = location.origin + location.pathname;
const map = JSON.parse(localStorage.getItem("shortlinks")||"{}");
const p = new URLSearchParams(location.search);
const key = p.get("go");

// redirect mode
if(key && map[key]){ location.replace(map[key]); }

// generator mode
document.getElementById("make").onclick = ()=>{
  const longurl = document.getElementById("longurl").value.trim();
  if(!longurl){alert("Paste something first");return;}
  const code = Math.random().toString(36).slice(2,6);
  map[code] = longurl;
  localStorage.setItem("shortlinks", JSON.stringify(map));
  const short = base.split("?")[0] + "?go=" + code;
  document.getElementById("out").innerHTML =
    `<p><strong>Short link:</strong> <a href="${short}" target="_blank">${short}</a></p>`;
};
</script>
</body>
</html>
